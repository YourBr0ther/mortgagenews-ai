# Mortgage AI Newsletter

A Docker-based daily newsletter that curates the top 5 mortgage AI innovations and delivers them via Pushbullet at 9 AM EST.

## Features

- **Multi-Source Aggregation**: Collects from NewsAPI, RSS feeds (Finextra, HousingWire, PYMNTS), and GitHub trending repos
- **AI-Powered Curation**: Uses NanoGPT to rank and summarize the most innovative items
- **Daily Delivery**: Automated 9 AM EST newsletter via Pushbullet
- **Docker-Ready**: Single container with built-in cron scheduling
- **Portainer Compatible**: Easy deployment via docker-compose

## Quick Start

### 1. Clone the Repository

```bash
git clone https://github.com/YourBr0ther/mortgagenews-ai.git
cd mortgagenews-ai
```

### 2. Configure Environment

```bash
cp .env.example .env
# Edit .env with your API keys
```

Required API keys:
- **NewsAPI**: Get at https://newsapi.org (free tier: 100 requests/day)
- **NanoGPT**: Get at https://nano-gpt.com
- **Pushbullet**: Get at https://www.pushbullet.com/account

### 3. Deploy with Docker

#### Option A: Use Pre-built Image

```bash
docker run -d \
  --name mortgagenews-ai \
  --env-file .env \
  -v ./logs:/app/logs \
  --restart unless-stopped \
  yourbr0ther/mortgagenews-ai:latest
```

#### Option B: Build from Source

```bash
docker compose up -d --build
```

### 4. Test Immediately (Optional)

```bash
# Run newsletter immediately without waiting for 9 AM
docker run --rm --env-file .env \
  -e RUN_ON_START=true \
  -v ./logs:/app/logs \
  yourbr0ther/mortgagenews-ai:latest
```

## Configuration

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `NEWSAPI_KEY` | Yes | - | NewsAPI.org API key |
| `NANOGPT_API_KEY` | Yes | - | NanoGPT API key |
| `PUSHBULLET_API_KEY` | Yes | - | Pushbullet access token |
| `GITHUB_TOKEN` | No | - | GitHub token (higher rate limits) |
| `NANOGPT_MODEL` | No | gpt-4o-mini | Model to use for analysis |
| `LOG_LEVEL` | No | INFO | Logging level (DEBUG, INFO, WARNING, ERROR) |
| `TIMEZONE` | No | America/New_York | Timezone for scheduling |
| `RUN_ON_START` | No | false | Run newsletter on container start |

## Newsletter Format

```
EXECUTIVE SUMMARY
--------------------
2-3 sentence summary of mortgage AI trends from yesterday.

TOP 5 MORTGAGE AI INNOVATIONS
------------------------------

1. [Article/Repo Title]
   Source: Publication Name

   - First sentence of innovation summary.
   - Second sentence with key details.

   Link: https://example.com/article

2. [GitHub] owner/repo-name (123 stars)
   Source: GitHub

   - Description of the repository.
   - Key features or recent updates.

   Link: https://github.com/owner/repo

...

------------------------------
Generated by Mortgage AI Newsletter
```

## Data Sources

### NewsAPI.org
- Searches for: mortgage AI, mortgage automation, mortgage fintech, lending AI
- Free tier: 100 requests/day (plenty for daily newsletter)

### RSS Feeds
- Finextra (fintech news)
- HousingWire (mortgage industry)
- PYMNTS (payments and fintech)

### GitHub
- Searches for recently updated repos related to mortgage AI
- Includes star counts and descriptions

## Development

### Run Locally (without Docker)

```bash
# Create virtual environment
python -m venv venv
source venv/bin/activate  # or `venv\Scripts\activate` on Windows

# Install dependencies
pip install -r requirements.txt

# Set environment variables
export NEWSAPI_KEY=your_key
export NANOGPT_API_KEY=your_key
export PUSHBULLET_API_KEY=your_key

# Run
python -m src.main
```

### Project Structure

```
mortgagenews-ai/
├── Dockerfile
├── docker-compose.yml
├── requirements.txt
├── entrypoint.sh
├── crontab
├── src/
│   ├── main.py              # Main orchestrator
│   ├── config.py            # Configuration
│   ├── collectors/          # Data collection
│   │   ├── newsapi.py
│   │   ├── rss.py
│   │   └── github.py
│   ├── services/            # External services
│   │   ├── llm.py           # NanoGPT integration
│   │   └── pushbullet.py    # Notification delivery
│   ├── models/
│   │   └── article.py       # Data models
│   └── utils/
│       ├── logger.py
│       └── dedup.py
└── logs/                    # Volume-mounted logs
```

## Logs

Logs are stored in `/app/logs/` (or `./logs/` when volume-mounted):
- `newsletter_YYYYMMDD.log` - Daily execution logs
- `cron.log` - Cron job output
- `health.txt` - Health check timestamp

View logs:
```bash
docker logs mortgagenews-ai
# or
cat logs/cron.log
```

## Portainer Deployment

1. Go to Stacks > Add Stack
2. Name: `mortgagenews-ai`
3. Build method: Repository or Upload
4. If using repository: `https://github.com/YourBr0ther/mortgagenews-ai`
5. Add environment variables in the "Environment variables" section
6. Deploy the stack

## Docker Hub

Available at: [yourbr0ther/mortgagenews-ai](https://hub.docker.com/r/yourbr0ther/mortgagenews-ai)

```bash
docker pull yourbr0ther/mortgagenews-ai:latest
```

## Troubleshooting

### No newsletter received
1. Check logs: `docker logs mortgagenews-ai`
2. Verify API keys in `.env`
3. Test with `RUN_ON_START=true`

### Rate limit errors
- NewsAPI: Free tier is 100 requests/day
- GitHub: Use `GITHUB_TOKEN` for higher limits
- Pushbullet: 500 pushes/month on free tier

### Container not healthy
- Check if cron is running: `docker exec mortgagenews-ai ps aux | grep cron`
- Verify health file: `docker exec mortgagenews-ai cat /app/logs/health.txt`

## License

MIT

## Author

YourBr0ther (yourbr0ther.tv@gmail.com)
